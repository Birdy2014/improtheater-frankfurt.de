include ../includes/utils.pug

doctype html
html
    head
        title #{title}
        meta(charset="UTF-8")
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        link(href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet")
        style.
            .centered-container {
                max-width: 1100px;
                width: 100%;
                display: inline-block;
                box-sizing: border-box;
            }

            #message-container {
                text-align: center;
                font-family: Roboto;
                background-color: white;
            }

            #message-container h1 {
                margin-top: 0;
            }

            #message-container div {
                padding: 10px;
            }

            #message-container a {
                text-decoration: none;
                color: inherit;
            }

            #description-container a {
                font-weight: bold;
            }

            #header {
                background-color: white;
            }

            #header img {
                display: block;
                height: 80px;
            }

            #title-container {
                color: #{textColor};
                background-color: #{color};
            }

            #title-container img {
                width: 100%;
            }

            #description-container {
                text-align: left;
            }

            /*
            properties are set to mobile by inline styles - for Gmail (IMAP)
            they get set to desktop here - for Thunderbird
            */
            #properties-table-desktop {
                display: table !important;
            }

            #properties-table-mobile {
                display: none !important;
            }

            /*
            properties are set to mobile by media query - for all clients that support media queries and style blocks
            */
            @media screen and (max-width: 750px) {
                #properties-table-desktop {
                    display: none !important;
                }

                #properties-table-mobile {
                    display: table !important;
                }
            }

            #footer, #footer * {
                color: black;
            }

    body
        p.
            Falls die E-Mail nicht korrekt angezeigt wird, kannst du sie #[a(href=website) hier im Browser anschauen].
        #message-container
            #header.centered-container
                img(src=logo)
            #title-container
                .centered-container
                    h1
                        a(href=website)!= marked.parseInline(title)
                    img(src=img)
            .centered-container
                #description-container
                    != marked(content)
                unless propertiesHidden
                    table#properties-table-desktop(style=`display: none; width: 100%; text-align: left; background-color: ${color}; color: ${textColor}; padding: 10px; margin-top: 10px; table-layout: fixed;`)
                        thead
                            tr
                                th(colspan=4 style="padding-bottom: 5px;")
                                    a(href=website)!= marked.parseInline(title)
                        tbody
                            tr
                                th Wann?
                                th Wo?
                                th Beitrag?
                                th Anmelden?
                            tr
                                td
                                    | #{dateText}
                                    br
                                    | #{timeText}
                                td
                                    != marked.parseInline(location)
                                td
                                    != marked.parseInline(price)
                                td
                                    != marked.parseInline(email)
                    table#properties-table-mobile(style=`display: table; width: 100%; text-align: left; background-color: ${color}; color: ${textColor}; padding: 10px; margin-top: 10px; table-layout: fixed;`)
                        thead
                            tr
                                th(style="padding-bottom: 5px;")
                                    a(href=website)!= marked.parseInline(title)
                        tbody
                            tr
                                th(style="padding-top: 5px;") Wann?
                            tr
                                td
                                    | #{dateText}
                                    br
                                    | #{timeText}
                            tr
                                th(style="padding-top: 5px;") Wo?
                            tr
                                td
                                    != marked.parseInline(location)
                            tr
                                th(style="padding-top: 5px;") Beitrag?
                            tr
                                td
                                    != marked.parseInline(price)
                            tr
                                th(style="padding-top: 5px;") Anmelden?
                            tr
                                td
                                    != marked.parseInline(email)
            #footer
                a(href="https://improtheater-frankfurt.de/impressum") Impressum
                = " | "
                a(href="https://improglycerin.de/datenschutz") Datenschutz
                = " | "
                a(href="https://improglycerin.de/kontakt/") Kontakt
                = " | "
                if subscriber.subscribedTo == 1 || subscriber.subscribedTo == 2
                    a(href=subscribe) #[+newsletterName(~subscriber.subscribedTo)] abonnieren
                    = " | "
                a(href=unsubscribe) Abmelden
