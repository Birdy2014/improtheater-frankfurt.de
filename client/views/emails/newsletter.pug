include ../includes/utils.pug

doctype html
html
    head
        title #{title}
        meta(charset="UTF-8")
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        link(href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet")
        style.
            #message-container div {
                padding: 10px;
            }

            #message-container a {
                text-decoration: none;
                color: inherit;
            }

            #description-container a {
                font-weight: bold;
            }

            /*
            properties are set to mobile by inline styles - for Gmail (IMAP)
            they get set to desktop here - for Thunderbird
            */
            #properties-table-desktop {
                display: table !important;
            }

            #properties-table-mobile {
                display: none !important;
            }

            /*
            properties are set to mobile by media query - for all clients that support media queries and style blocks
            */
            @media screen and (max-width: 750px) {
                #properties-table-desktop {
                    display: none !important;
                }

                #properties-table-mobile {
                    display: table !important;
                }
            }

    body(style="background-color: white;")
        p.
            Falls die E-Mail nicht korrekt angezeigt wird, kannst du sie #[a(href=website) hier im Browser anschauen].
        #message-container(style="text-align: center; font-family: Roboto;")
            #header.centered-container(style="width: 1100px; max-width: 100%; display: inline-block; box-sizing: border-box;")
                img(src=logo style="display: block; height: 80px;")
            #title-container(style=`color: ${textColor}; background-color: ${color};`)
                .centered-container(style="width: 1100px; max-width: 100%; display: inline-block; box-sizing: border-box;")
                    h1(style="margin-top: 0;")
                        a(href=website style="color: inherit;")!= marked.parseInline(title)
                    img(src=img style="width: 100%;")
            .centered-container(style="width: 1100px; max-width: 100%; display: inline-block; box-sizing: border-box;")
                #description-container(style="text-align: left;")
                    != marked(content)
                unless propertiesHidden
                    <!--[if !mso]><!-->
                    table#properties-table-desktop(style=`display: none; width: 100%; text-align: left; background-color: ${color}; color: ${textColor}; padding: 10px; margin-top: 10px; table-layout: fixed;`)
                        thead
                            tr
                                th(colspan=4 style="padding-bottom: 5px;")
                                    a(href=website style="color: inherit;")!= marked.parseInline(title)
                        tbody
                            tr
                                th Wann?
                                th Wo?
                                th Beitrag?
                                th Anmelden?
                            tr
                                td
                                    | #{dateText}
                                    br
                                    | #{timeText}
                                td
                                    != marked.parseInline(location)
                                td
                                    != marked.parseInline(price)
                                td
                                    != marked.parseInline(email)
                    table#properties-table-mobile(style=`display: table; width: 100%; text-align: left; background-color: ${color}; color: ${textColor}; padding: 10px; margin-top: 10px; table-layout: fixed;`)
                        thead
                            tr
                                th(style="padding-bottom: 5px;")
                                    a(href=website style="color: inherit;")!= marked.parseInline(title)
                        tbody
                            tr
                                th(style="padding-top: 5px;") Wann?
                            tr
                                td
                                    | #{dateText}
                                    br
                                    | #{timeText}
                            tr
                                th(style="padding-top: 5px;") Wo?
                            tr
                                td
                                    != marked.parseInline(location)
                            tr
                                th(style="padding-top: 5px;") Beitrag?
                            tr
                                td
                                    != marked.parseInline(price)
                            tr
                                th(style="padding-top: 5px;") Anmelden?
                            tr
                                td
                                    != marked.parseInline(email)
                    <!--<![endif]-->
                    <!--[if mso]>
                    table(style=`width: 100%; text-align: left; background-color: ${color}; color: ${textColor}; padding: 10px; margin-top: 10px; table-layout: fixed;`)
                        thead
                            tr
                                th(colspan=4 style="padding-bottom: 5px;")
                                    a(href=website style="color: inherit;")!= marked.parseInline(title)
                        tbody
                            tr
                                th Wann?
                                th Wo?
                                th Beitrag?
                                th Anmelden?
                            tr
                                td
                                    | #{dateText}
                                    br
                                    | #{timeText}
                                td
                                    != marked.parseInline(location)
                                td
                                    != marked.parseInline(price)
                                td
                                    != marked.parseInline(email)
                    <![endif]-->
            #footer(style="color: black;")
                a(href="https://improtheater-frankfurt.de/impressum" style="text-decoration: none; color: black;") Impressum
                = " | "
                a(href="https://improglycerin.de/datenschutz" style="text-decoration: none; color: black;") Datenschutz
                = " | "
                a(href="https://improglycerin.de/kontakt/" style="text-decoration: none; color: black;") Kontakt
                = " | "
                if subscriber.subscribedTo == 1 || subscriber.subscribedTo == 2
                    a(href=subscribe style="text-decoration: none; color: black;") #[+newsletterName(~subscriber.subscribedTo)] abonnieren
                    = " | "
                a(href=unsubscribe style="text-decoration: none; color: black;") Abmelden
